<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Types · DistributedEmitterOpt.jl</title><meta name="title" content="Types · DistributedEmitterOpt.jl"/><meta property="og:title" content="Types · DistributedEmitterOpt.jl"/><meta property="twitter:title" content="Types · DistributedEmitterOpt.jl"/><meta name="description" content="Documentation for DistributedEmitterOpt.jl."/><meta property="og:description" content="Documentation for DistributedEmitterOpt.jl."/><meta property="twitter:description" content="Documentation for DistributedEmitterOpt.jl."/><meta property="og:url" content="https://ianmatthewhammond.github.io/DistributedEmitterOpt.jl/api/types/"/><meta property="twitter:url" content="https://ianmatthewhammond.github.io/DistributedEmitterOpt.jl/api/types/"/><link rel="canonical" href="https://ianmatthewhammond.github.io/DistributedEmitterOpt.jl/api/types/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="DistributedEmitterOpt.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">DistributedEmitterOpt.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../architecture/">Architecture</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/metal_2d_image_eval/">Metal 2D Image Evaluation</a></li><li><a class="tocitem" href="../../examples/anisotropic_3d_inelastic_optimization/">Anisotropic 3D Inelastic Optimization</a></li><li><a class="tocitem" href="../../examples/dielectric_2d_elastic_optimization/">Dielectric 2D Elastic Optimization</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li class="is-active"><a class="tocitem" href>Types</a><ul class="internal"><li><a class="tocitem" href="#Problem-Definition"><span>Problem Definition</span></a></li><li><a class="tocitem" href="#ObjectiveFunction-Interface"><span>ObjectiveFunction Interface</span></a></li><li><a class="tocitem" href="#Optimization-Problem"><span>Optimization Problem</span></a></li><li><a class="tocitem" href="#Simulation-Infrastructure"><span>Simulation Infrastructure</span></a></li><li><a class="tocitem" href="#Solver-Caches"><span>Solver Caches</span></a></li><li><a class="tocitem" href="#Foundry-Grid-(2D-DOF-Mode)"><span>Foundry Grid (2D DOF Mode)</span></a></li><li><a class="tocitem" href="#Control-Parameters"><span>Control Parameters</span></a></li></ul></li><li><a class="tocitem" href="../physics/">Physics</a></li><li><a class="tocitem" href="../objectives/">Objectives</a></li><li><a class="tocitem" href="../topologyopt/">TopologyOpt</a></li><li><a class="tocitem" href="../optimization/">Optimization</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API Reference</a></li><li class="is-active"><a href>Types</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Types</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h1><p>Core data structures for problem definition and state management.</p><h2 id="Problem-Definition"><a class="docs-heading-anchor" href="#Problem-Definition">Problem Definition</a><a id="Problem-Definition-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-Definition" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.FieldConfig"><a class="docstring-binding" href="#DistributedEmitterOpt.FieldConfig"><code>DistributedEmitterOpt.FieldConfig</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">FieldConfig</code></pre><p>Configuration for a single field solve (frequency, angle, polarization).</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.Environment"><a class="docstring-binding" href="#DistributedEmitterOpt.Environment"><code>DistributedEmitterOpt.Environment</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Environment(; mat_design, mat_substrate=mat_design, mat_fluid=1.33)</code></pre><p><strong>Fields</strong></p><ul><li><code>mat_design</code> — Design region material (typically metal)</li><li><code>mat_substrate</code> — Substrate material (defaults to mat_design)</li><li><code>mat_fluid</code> — Fluid/background material (default 1.33 for water)</li></ul></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.MaxwellProblem"><a class="docstring-binding" href="#DistributedEmitterOpt.MaxwellProblem"><code>DistributedEmitterOpt.MaxwellProblem</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MaxwellProblem</code></pre><p>PDE definition for Maxwell curl-curl equation. Specifies the physical environment, input/output field configurations, and solver parameters.</p><p>This type describes WHAT to solve (environment + configs), not HOW to solve (that&#39;s in simulation + caches).</p></div></section></details></article><h2 id="ObjectiveFunction-Interface"><a class="docs-heading-anchor" href="#ObjectiveFunction-Interface">ObjectiveFunction Interface</a><a id="ObjectiveFunction-Interface-1"></a><a class="docs-heading-anchor-permalink" href="#ObjectiveFunction-Interface" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.ObjectiveFunction"><a class="docstring-binding" href="#DistributedEmitterOpt.ObjectiveFunction"><code>DistributedEmitterOpt.ObjectiveFunction</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ObjectiveFunction</code></pre><p>Abstract type for optimization objectives. Implementations define how to compute the objective value and gradients from field solutions.</p><p><strong>Required interface</strong></p><ul><li><code>compute_objective(obj, pde, fields, pt, sim)</code> — Objective value g</li><li><code>compute_adjoint_sources(obj, pde, fields, pt, sim)</code> — ∂g/∂E for each field</li><li><code>explicit_sensitivity(obj, pde, fields, pf, pt, sim, control)</code> — Explicit ∂g/∂pf</li></ul><p>Fields is a Dict{CacheKey, CellField} mapping (λ, θ, pol) → E. <code>pde</code> provides the input/output FieldConfig lists and weights.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.compute_objective"><a class="docstring-binding" href="#DistributedEmitterOpt.compute_objective"><code>DistributedEmitterOpt.compute_objective</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">compute_objective(obj::SERSObjective, pde, fields, pt, sim) → Float64</code></pre><p>Compute SERS objective using trace formula. Sums over all input/output combinations with their weights.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.compute_adjoint_sources"><a class="docstring-binding" href="#DistributedEmitterOpt.compute_adjoint_sources"><code>DistributedEmitterOpt.compute_adjoint_sources</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">compute_adjoint_sources(obj::SERSObjective, pde, fields, pt, sim) → Dict{CacheKey, Vector}</code></pre><p>Compute adjoint RHS vectors ∂g/∂E for each field. Sums contributions over all input/output combinations with weights.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.explicit_sensitivity"><a class="docstring-binding" href="#DistributedEmitterOpt.explicit_sensitivity"><code>DistributedEmitterOpt.explicit_sensitivity</code></a> — <span class="docstring-category">Function</span></summary><section><div><p>Default: no explicit sensitivity term.</p></div></section><section><div><pre><code class="language-julia hljs">explicit_sensitivity(obj::SERSObjective, pde, fields, pf, pt, sim, control; space=sim.Pf) → Vector</code></pre><p>Explicit ∂g/∂pf term from objective&#39;s direct dependence on pt. Sums contributions over all input/output combinations with weights.</p></div></section></details></article><h2 id="Optimization-Problem"><a class="docs-heading-anchor" href="#Optimization-Problem">Optimization Problem</a><a id="Optimization-Problem-1"></a><a class="docs-heading-anchor-permalink" href="#Optimization-Problem" title="Permalink"></a></h2><p>The main entry point. Use the meshfile-based constructor for most cases:</p><pre><code class="language-julia hljs">prob = OptimizationProblem(pde, objective, meshfile, solver; per_x, per_y, foundry_mode, control)</code></pre><p>This automatically creates a <a href="../../#SimulationBundle"><code>SimulationBundle</code></a> with simulations for both x and y polarizations.</p><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.OptimizationProblem"><a class="docstring-binding" href="#DistributedEmitterOpt.OptimizationProblem"><code>DistributedEmitterOpt.OptimizationProblem</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">OptimizationProblem</code></pre><p>Main container for topology optimization. Holds the PDE config, objective, FEM infrastructure, solver caches, and current optimization state.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.init_uniform!"><a class="docstring-binding" href="#DistributedEmitterOpt.init_uniform!"><code>DistributedEmitterOpt.init_uniform!</code></a> — <span class="docstring-category">Function</span></summary><section><div><p>Set all design parameters to <code>value</code>.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.init_random!"><a class="docstring-binding" href="#DistributedEmitterOpt.init_random!"><code>DistributedEmitterOpt.init_random!</code></a> — <span class="docstring-category">Function</span></summary><section><div><p>Randomize design parameters.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.init_from_file!"><a class="docstring-binding" href="#DistributedEmitterOpt.init_from_file!"><code>DistributedEmitterOpt.init_from_file!</code></a> — <span class="docstring-category">Function</span></summary><section><div><p>Load design parameters from a file.</p></div></section></details></article><div class="admonition is-warning" id="Missing-docstring.-aaaa3fef9f233980"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-aaaa3fef9f233980" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>num_dofs</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Simulation-Infrastructure"><a class="docs-heading-anchor" href="#Simulation-Infrastructure">Simulation Infrastructure</a><a id="Simulation-Infrastructure-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation-Infrastructure" title="Permalink"></a></h2><p>A <a href="#DistributedEmitterOpt.Simulation"><code>Simulation</code></a> holds the FEM infrastructure (spaces, measures, mesh). A <a href="../../#SimulationBundle"><code>SimulationBundle</code></a> groups simulations by polarization for mixed-polarization problems.</p><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.Simulation"><a class="docstring-binding" href="#DistributedEmitterOpt.Simulation"><code>DistributedEmitterOpt.Simulation</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Simulation</code></pre><p>Container for all FEM infrastructure: discrete model, function spaces, integration measures, and FoundryGrid for 2D DOF mode.</p><p><strong>FE Spaces</strong></p><ul><li><code>V</code>, <code>U</code> — Nédélec spaces for E-field</li><li><code>P</code> — Piecewise constant (raw design on mesh)</li><li><code>Pf</code> — Continuous Lagrange (filtered design)</li></ul><p><strong>Integration Measures</strong></p><ul><li><code>dΩ</code> — Full domain</li><li><code>dΩ_design</code> — Design region</li><li><code>dΩ_raman</code> — Raman/target region</li><li><code>dS_top</code>, <code>dS_bottom</code> — ABC boundaries</li><li><code>dΓ_source</code> — Source plane</li></ul></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.build_simulation"><a class="docstring-binding" href="#DistributedEmitterOpt.build_simulation"><code>DistributedEmitterOpt.build_simulation</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">build_simulation(meshfile; kwargs...) -&gt; Simulation</code></pre><p>Build Simulation from mesh file.</p><p><strong>Arguments</strong></p><ul><li><code>meshfile</code> — Path to .msh file</li><li><code>order</code> — Nédélec element order (default 0)</li><li><code>degree</code> — Quadrature degree (default 4)</li><li><code>dir_x</code>, <code>dir_y</code> — Dirichlet boundaries for PEC symmetry</li><li><code>source_y</code> — Source polarization (true=y, false=x)</li><li><code>foundry_mode</code> — Use 2D DOF grid</li><li><code>sizes</code> — Manual (x<em>lo, x</em>hi, y<em>lo, y</em>hi, z<em>lo, z</em>hi) for grid</li></ul></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.SimulationBundle"><a class="docstring-binding" href="#DistributedEmitterOpt.SimulationBundle"><code>DistributedEmitterOpt.SimulationBundle</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SimulationBundle</code></pre><p>Container for multiple <code>Simulation</code> objects (per polarization), sharing the same underlying discrete model.</p><p><strong>Fields</strong></p><ul><li><code>default::Simulation</code>: The primary simulation (usually y-polarized)</li><li><code>by_pol::Dict{Symbol,Simulation}</code>: Sims keyed by polarization (:x, :y)</li></ul></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.build_simulation_bundle"><a class="docstring-binding" href="#DistributedEmitterOpt.build_simulation_bundle"><code>DistributedEmitterOpt.build_simulation_bundle</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">build_simulation_bundle(meshfile; per_x=false, per_y=false, kwargs...)</code></pre><p>Build a polarization-aware SimulationBundle with shared discrete model.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.default_sim"><a class="docstring-binding" href="#DistributedEmitterOpt.default_sim"><code>DistributedEmitterOpt.default_sim</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">default_sim(sim_or_bundle)</code></pre><p>Get the default <code>Simulation</code> from a Simulation or SimulationBundle.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.sim_for"><a class="docstring-binding" href="#DistributedEmitterOpt.sim_for"><code>DistributedEmitterOpt.sim_for</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">sim_for(sim_or_bundle, fc::FieldConfig)</code></pre><p>Get the appropriate <code>Simulation</code> for a given <code>FieldConfig</code> (based on polarization).</p></div></section></details></article><h2 id="Solver-Caches"><a class="docs-heading-anchor" href="#Solver-Caches">Solver Caches</a><a id="Solver-Caches-1"></a><a class="docs-heading-anchor-permalink" href="#Solver-Caches" title="Permalink"></a></h2><p>Caches for LU factorizations, keyed by wavelength. <a href="#DistributedEmitterOpt.SolverPoolBundle"><code>SolverPoolBundle</code></a> mirrors <a href="../../#SimulationBundle"><code>SimulationBundle</code></a> for polarization-aware caching.</p><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.AbstractSolver"><a class="docstring-binding" href="#DistributedEmitterOpt.AbstractSolver"><code>DistributedEmitterOpt.AbstractSolver</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AbstractSolver</code></pre><p>Interface for sparse direct solvers. Concrete implementations wrap Pardiso, UMFPACK, etc.</p><p><strong>Required interface</strong></p><ul><li><code>lu!(cache, A)</code> — Factorize matrix A</li><li><code>solve!(cache, b)</code> — Solve Ax = b (forward)</li><li><code>solve_adjoint!(cache, b)</code> — Solve A&#39;x = b (adjoint)</li></ul></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.UmfpackSolver"><a class="docstring-binding" href="#DistributedEmitterOpt.UmfpackSolver"><code>DistributedEmitterOpt.UmfpackSolver</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>UMFPACK-based solver.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.SolverCache"><a class="docstring-binding" href="#DistributedEmitterOpt.SolverCache"><code>DistributedEmitterOpt.SolverCache</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SolverCache{S&lt;:AbstractSolver}</code></pre><p>Caches LU factorizations for reuse across optimization iterations. Separate caches for:</p><ul><li>Maxwell system (complex, A_factor)</li><li>Eigen shift system (complex, A<em>factor in eigen</em>cache)</li><li>Filter PDE (real, F_factor)</li></ul><p><strong>Fields</strong></p><ul><li><code>A_factor</code> — Maxwell LU factorization</li><li><code>F_factor</code> — Filter Helmholtz LU factorization</li><li><code>E2_factor</code> — E² regularization LU factorization (optional)</li><li><code>x</code> — Solution vector cache</li><li><code>am_head</code> — True if this process performs solves (MPI compatibility)</li><li><code>solver</code> — Solver backend</li></ul></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.SolverCachePool"><a class="docstring-binding" href="#DistributedEmitterOpt.SolverCachePool"><code>DistributedEmitterOpt.SolverCachePool</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SolverCachePool{S&lt;:AbstractSolver}</code></pre><p>Pool of solver caches, one per unique (λ, θ, polarization) configuration. Deduplicates caches so identical configs share the same LU factorization.</p><p>Also holds a shared filter cache and a shared eigen cache for shift-invert solves.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.SolverPoolBundle"><a class="docstring-binding" href="#DistributedEmitterOpt.SolverPoolBundle"><code>DistributedEmitterOpt.SolverPoolBundle</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SolverPoolBundle</code></pre><p>Container for multiple <code>SolverCachePool</code> objects (per polarization), corresponding to the <code>Simulation</code> objects in a bundle.</p><p><strong>Fields</strong></p><ul><li><code>default::SolverCachePool</code>: The primary pool</li><li><code>by_pol::Dict{Symbol,SolverCachePool}</code>: Pools keyed by polarization (:x, :y)</li></ul></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.get_cache!"><a class="docstring-binding" href="#DistributedEmitterOpt.get_cache!"><code>DistributedEmitterOpt.get_cache!</code></a> — <span class="docstring-category">Function</span></summary><section><div><p>Get or create cache for a field config.</p></div></section><section><div><p>Get cache by key directly.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.clear_maxwell_factors!"><a class="docstring-binding" href="#DistributedEmitterOpt.clear_maxwell_factors!"><code>DistributedEmitterOpt.clear_maxwell_factors!</code></a> — <span class="docstring-category">Function</span></summary><section><div><p>Clear all Maxwell factorizations (call when pt changes).</p></div></section><section><div><pre><code class="language-julia hljs">clear_maxwell_factors!(pool)</code></pre><p>Clear LU factors for single or bundled pools.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.default_pool"><a class="docstring-binding" href="#DistributedEmitterOpt.default_pool"><code>DistributedEmitterOpt.default_pool</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">default_pool(pool_or_bundle)</code></pre><p>Get the default <code>SolverCachePool</code> from a pool or bundle.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.pool_for"><a class="docstring-binding" href="#DistributedEmitterOpt.pool_for"><code>DistributedEmitterOpt.pool_for</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">pool_for(pool_or_bundle, fc::FieldConfig)</code></pre><p>Get the appropriate <code>SolverCachePool</code> for a given <code>FieldConfig</code>.</p></div></section></details></article><h2 id="Foundry-Grid-(2D-DOF-Mode)"><a class="docs-heading-anchor" href="#Foundry-Grid-(2D-DOF-Mode)">Foundry Grid (2D DOF Mode)</a><a id="Foundry-Grid-(2D-DOF-Mode)-1"></a><a class="docs-heading-anchor-permalink" href="#Foundry-Grid-(2D-DOF-Mode)" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.FoundryGrid"><a class="docstring-binding" href="#DistributedEmitterOpt.FoundryGrid"><code>DistributedEmitterOpt.FoundryGrid</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">FoundryGrid</code></pre><p>2D rectilinear grid for lithography-compatible topology optimization. Design parameters live on a regular (x, y) grid and are interpolated to the 3D FEM mesh via bilinear interpolation.</p><p><strong>Fields</strong></p><ul><li><code>x</code> — Grid x-coordinates (monotonic)</li><li><code>y</code> — Grid y-coordinates (monotonic)</li><li><code>params</code> — Design parameter matrix (nx × ny)</li><li><code>nodes</code> — Mesh node coordinates for Jacobian computation</li><li><code>jacobian</code> — Cached ∂(mesh node values)/∂(grid param) mapping</li><li><code>adj_idx</code> — Cached grid indices for adjoint scatter (4 × nnodes)</li><li><code>adj_w</code> — Cached weights for adjoint scatter (4 × nnodes)</li><li><code>adj_ready</code> — Whether adjoint cache is initialized</li></ul></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.getgrid"><a class="docstring-binding" href="#DistributedEmitterOpt.getgrid"><code>DistributedEmitterOpt.getgrid</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">getgrid(labels, Ω, np, nodes; sizes=nothing) -&gt; FoundryGrid</code></pre><p>Build a FoundryGrid from mesh topology. The grid covers the x-y extent of the design region with approximately √np points per side.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.pf_grid"><a class="docstring-binding" href="#DistributedEmitterOpt.pf_grid"><code>DistributedEmitterOpt.pf_grid</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">pf_grid(r, params, gridx, gridy) -&gt; Real</code></pre><p>Bilinear interpolation of grid parameters at point r = (x, y, z).</p></div></section><section><div><p>Convenience method using FoundryGrid.</p></div></section></details></article><h2 id="Control-Parameters"><a class="docs-heading-anchor" href="#Control-Parameters">Control Parameters</a><a id="Control-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Control-Parameters" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.Control"><a class="docstring-binding" href="#DistributedEmitterOpt.Control"><code>DistributedEmitterOpt.Control</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Control</code></pre><p>Hyperparameters for the topology optimization pipeline: filtering, projection, and linewidth constraints.</p><p><strong>Filtering</strong></p><ul><li><code>use_filter</code> — Enable filtering step</li><li><code>R_filter</code> — Filter radius (rx, ry, rz) in nm</li><li><code>use_dct</code> — Use DCT convolution (true) or Helmholtz PDE (false)</li></ul><p><strong>Projection / SSP</strong></p><ul><li>SSP on the FEM mesh is always used (pf → pt).</li><li><code>β</code> — Projection steepness (higher = sharper, use continuation)</li><li><code>η</code> — Threshold point (typically 0.5)</li><li><code>R_ssp</code> — SSP smoothing radius</li></ul><p><strong>Linewidth Constraints</strong></p><ul><li><code>use_constraints</code> — Enable erosion/dilation constraints</li><li><code>η_erosion</code> — Erosion threshold (typically 0.75)</li><li><code>η_dilation</code> — Dilation threshold (typically 0.25)</li><li><code>b1</code> — Constraint tolerance</li><li><code>c0</code> — Indicator function steepness</li></ul></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.tanh_projection"><a class="docstring-binding" href="#DistributedEmitterOpt.tanh_projection"><code>DistributedEmitterOpt.tanh_projection</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">tanh_projection(x, η, β) -&gt; Real</code></pre><p>Heaviside-ish projection: smooth step from 0 to 1 centered at η. As β → ∞, approaches true Heaviside function.</p></div></section><section><div><p>Vectorized tanh projection for arrays.</p></div></section><section><div><p>Convenience with Control struct.</p></div></section></details></article><article><details class="docstring" open="true"><summary id="DistributedEmitterOpt.Threshold"><a class="docstring-binding" href="#DistributedEmitterOpt.Threshold"><code>DistributedEmitterOpt.Threshold</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">Threshold(pf; control) -&gt; Real</code></pre><p>Tanh projection for lazy composition with Gridap&#39;s <code>∘</code> operator. This is the function form used in ComposedFunctions.</p><p>Reference: Old codebase Controls.jl:Threshold</p></div></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../examples/dielectric_2d_elastic_optimization/">« Dielectric 2D Elastic Optimization</a><a class="docs-footer-nextpage" href="../physics/">Physics »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Friday 30 January 2026 21:52">Friday 30 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
